"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4089],{9301:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>s,metadata:()=>l,toc:()=>a});var r=t(5893),o=t(1151);const s={title:"Oct 20"},i=void 0,l={id:"learning-journal/2023/October/oct_20_23",title:"Oct 20",description:"What I did today",source:"@site/docs/learning-journal/2023/October/oct_20_23.md",sourceDirName:"learning-journal/2023/October",slug:"/learning-journal/2023/October/oct_20_23",permalink:"/my-website/docs/learning-journal/2023/October/oct_20_23",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Oct 20"},sidebar:"tutorialSidebar",previous:{title:"Oct 19",permalink:"/my-website/docs/learning-journal/2023/October/oct_19_23"},next:{title:"Oct 22",permalink:"/my-website/docs/learning-journal/2023/October/oct_22_23"}},d={},a=[{value:"What I did today",id:"what-i-did-today",level:3},{value:"Flaskr project",id:"flaskr-project",level:3},{value:"Continue working on blueprints for the applications",id:"continue-working-on-blueprints-for-the-applications",level:4},{value:"Auth file is used to implement functions for user authentication, registeration, login, logout functions",id:"auth-file-is-used-to-implement-functions-for-user-authentication-registeration-login-logout-functions",level:5},{value:"Blop file is used to implement functions for blog posts",id:"blop-file-is-used-to-implement-functions-for-blog-posts",level:5},{value:"Templates",id:"templates",level:3}];function u(e){const n={code:"code",h3:"h3",h4:"h4",h5:"h5",li:"li",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"what-i-did-today",children:"What I did today"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Finished Leetcode 75 Array/String exercises"}),"\n",(0,r.jsx)(n.li,{children:"Almost done with Flaskr project tutorial"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"flaskr-project",children:"Flaskr project"}),"\n",(0,r.jsx)(n.h4,{id:"continue-working-on-blueprints-for-the-applications",children:"Continue working on blueprints for the applications"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Wrote fucntions for register, login, logout, create, update, and delete post"}),"\n",(0,r.jsx)(n.li,{children:"Created templates"}),"\n",(0,r.jsx)(n.li,{children:"However, I was only able to run and get result for Register, Login, and Logout functions. The functions work with posts haven't been able to work out yet. Will try to fix these problems first things tomorrow."}),"\n"]}),"\n",(0,r.jsx)(n.h5,{id:"auth-file-is-used-to-implement-functions-for-user-authentication-registeration-login-logout-functions",children:"Auth file is used to implement functions for user authentication, registeration, login, logout functions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="flaskr/auth.py"',children:"import functools\n\nfrom flask import (\n    Blueprint, flash, g, redirect, render_template, request, session, url_for\n)\n\nfrom werkzeug.security import check_password_hash, generate_password_hash\n\nfrom flaskr.db import get_db\n\nbp = Blueprint('auth', __name__, url_prefix='/auth')\n\n\n@bp.route('/register', methods=('GET', 'POST'))\ndef register():\n    if request.method == \"POST\":\n        username = request.form['username']\n        password = request.form['password']\n        db = get_db()\n        error = None\n\n        if not username:\n            error = 'Username is required'\n        elif not password:\n            error = 'Password is required'\n\n        if error is None:\n            try:\n                db.execute(\n                    \"INSERT INTO user (username, password) VALUES (?, ?)\",\n                    (username, generate_password_hash(password)),\n                )\n                db.commit()\n            except db.IntegrityError:\n                error = f\"User {username} is already registered.\"\n            else:\n                return redirect(url_for(\"auth.login\"))\n\n        flash(error)\n\n    return render_template('auth/register.html')\n\n\n@bp.route('/login', methods=('GET', 'POST'))\ndef login():\n    if request.method == \"POST\":\n        username = request.form['username']\n        password = request.form['password']\n        db = get_db()\n        error = None\n        user = db.execute(\n            'SELECT * FROM user WHERE username = ?', (username,)\n        ).fetchone()\n\n        if user is None:\n            error = \"Incorrect username.\"\n        elif not check_password_hash(user['password'], password):\n            error = \"Incorrect password.\"\n\n        if error is None:\n            session.clear()\n            session['user_id'] = user['id']\n            return redirect(url_for('index'))\n\n        flash(error)\n\n    return render_template('auth/login.html')\n\n\n@bp.before_app_request\ndef load_logged_in_user():\n    user_id = session.get('user_id')\n\n    if user_id is None:\n        g.user = None\n    else:\n        g.user = get_db().execute(\n            'SELECT * FROM user WHERE id = ?', (user_id,)\n        )\n\n\n@bp.route('/logout')\ndef logout():\n    session.clear()\n    return redirect(url_for('index'))\n\n\ndef login_required(view):\n    @functools.wraps(view)\n    def wrapped_view(**kwargs):\n        if g.user is None:\n            return redirect(url_for('auth.login'))\n\n        return view(**kwargs)\n\n    return wrapped_view\n\n"})}),"\n",(0,r.jsx)(n.h5,{id:"blop-file-is-used-to-implement-functions-for-blog-posts",children:"Blop file is used to implement functions for blog posts"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="flaskr/blog.py"',children:"from flask import (\n    Blueprint, flash, g, redirect, render_template, request, url_for\n)\n\nfrom werkzeug.exceptions import abort\n\nfrom flaskr.auth import login_required\nfrom flaskr.db import get_db\n\nbp = Blueprint('blog', __name__)\n\n\n@bp.route('/')\ndef index():\n    db = get_db()\n    posts = db.execute(\n        'SELECT p.id, title, body, created, author_id, username'\n        ' FROM post p JOIN user u ON p.author_id = u.id'\n        ' ORDER BY created DESC'\n    ).fetchall()\n    return render_template('blog/index.html', posts=posts)\n\n\n@bp.route('/create', methods=('GET', 'POST'))\n@login_required\ndef create():\n    if request.method == 'POST':\n        title = request.form['title']\n        body = request.form['body']\n        error = None\n\n        if not title:\n            error = 'Title is required.'\n\n        if error is not None:\n            flash(error)\n        else:\n            db = get_db()\n            db.execute(\n                'INSERT INTO post (title, body, author_id)'\n                ' VALUES (?, ?, ?)',\n                (title, body, g.user['id'])\n            )\n            db.commit()\n            return redirect(url_for('blog.index'))\n\n    return render_template('blog/create.html')\n\n\ndef get_post(id, check_author=True):\n    post = get_db().execute(\n        'SELECT p.id, title, body, created, author_id, username'\n        ' FROM post p JOIN user u ON p.author_id = u.id'\n        ' WHERE p.id = ?',\n        (id,)\n    ).fetchone()\n\n    if post is None:\n        abort(404, f\"Post id {id} doesn't exist.\")\n\n    if check_author and post['author_id'] != g.user['id']:\n        abort(403)\n\n    return post\n\n\n@bp.route('/<int:id>/update', methods=('GET', 'POST'))\n@login_required\ndef update(id):\n    post = get_post(id)\n\n    if request.method == 'POST':\n        title = request.form['title']\n        body = request.form['body']\n        error = None\n\n        if not title:\n            error = 'Title is required.'\n\n        if error is not None:\n            flash(error)\n        else:\n            db = get_db()\n            db.execute(\n                'UPDATE post SET title = ?, body = ?'\n                ' WHERE id = ?',\n                (title, body, id)\n            )\n            db.commit()\n            return redirect(url_for('blog.index'))\n\n    return render_template('blog/update.html', post=post)\n\n\n@bp.route('/<int:id>/delete', methods=('POST',))\n@login_required\ndef delete(id):\n    get_post(id)\n    db = get_db()\n    db.execute('DELETE FROM post WHERE id = ?', (id,))\n    db.commit()\n    return redirect(url_for('blog.index'))\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"templates",children:"Templates"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",metastring:'title="flaskr/templates/auth/login.html"',children:'{% extends \'base.html\' %}\n\n{% block header %}\n  <h1>{% block title %}Log In{% endblock %}</h1>\n{% endblock %}\n\n{% block content %}\n  <form method="post">\n    <label for="username">Username</label>\n    <input name="username" id="username" required>\n    <label for="password">Password</label>\n    <input type="password" name="password" id="password" required>\n    <input type="submit" value="Log In">\n  </form>\n{% endblock %}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",metastring:'title="flaskr/templates/auth/register.html"',children:'{% extends \'base.html\' %}\n\n{% block header %}\n  <h1>{% block title %}Register{% endblock %}</h1>\n{% endblock %}\n\n{% block content %}\n  <form method="post">\n    <label for="username">Username</label>\n    <input name="username" id="username" required>\n    <label for="password">Password</label>\n    <input type="password" name="password" id="password" required>\n    <input type="submit" value="Register">\n  </form>\n{% endblock %}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",metastring:'title="flaskr/templates/blog/create.html"',children:'{% extends \'base.html\' %}\n\n{% block header %}\n  <h1>{% block title %}New Post{% endblock %}</h1>\n{% endblock %}\n\n{% block content %}\n  <form method="post">\n    <label for="title">Title</label>\n    <input name="title" id="title" value="{{ request.form[\'title\'] }}" required>\n    <label for="body">Body</label>\n    <textarea name="body" id="body">{{ request.form[\'body\'] }}</textarea>\n    <input type="submit" value="Save">\n  </form>\n{% endblock %}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",metastring:'title="faslkr/templates/blog/index.html"',children:"{% extends 'base.html' %}\n\n{% block header %}\n  <h1>{% block title %}Posts{% endblock %}</h1>\n  {% if g.user %}\n    <a class=\"action\" href=\"{{ url_for('blog.create') }}\">New</a>\n  {% endif %}\n{% endblock %}\n\n{% block content %}\n  {% for post in posts %}\n    <article class=\"post\">\n      <header>\n        <div>\n          <h1>{{ post['title'] }}</h1>\n          <div class=\"about\">by {{ post['username'] }} on {{ post['created'].strftime('%Y-%m-%d') }}</div>\n        </div>\n        {% if g.user['id'] == post['author_id'] %}\n          <a class=\"action\" href=\"{{ url_for('blog.update', id=post['id']) }}\">Edit</a>\n        {% endif %}\n      </header>\n      <p class=\"body\">{{ post['body'] }}</p>\n    </article>\n    {% if not loop.last %}\n      <hr>\n    {% endif %}\n  {% endfor %}\n{% endblock %}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",metastring:'title="flaskr/templates/blog/update.html"',children:'{% extends \'base.html\' %}\n\n{% block header %}\n  <h1>{% block title %}Edit "{{ post[\'title\'] }}"{% endblock %}</h1>\n{% endblock %}\n\n{% block content %}\n  <form method="post">\n    <label for="title">Title</label>\n    <input name="title" id="title"\n      value="{{ request.form[\'title\'] or post[\'title\'] }}" required>\n    <label for="body">Body</label>\n    <textarea name="body" id="body">{{ request.form[\'body\'] or post[\'body\'] }}</textarea>\n    <input type="submit" value="Save">\n  </form>\n  <hr>\n  <form action="{{ url_for(\'blog.delete\', id=post[\'id\']) }}" method="post">\n    <input class="danger" type="submit" value="Delete" onclick="return confirm(\'Are you sure?\');">\n  </form>\n{% endblock %}\n'})})]})}function c(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>i});var r=t(7294);const o={},s=r.createContext(o);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);